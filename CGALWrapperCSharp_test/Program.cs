using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Runtime.InteropServices;

namespace CGALWrapperCSharp_test
{
    class Program
    {
        [DllImport("CGALWrapper", EntryPoint = "getPolygonSpine", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
        public static extern IntPtr getPolygonSpine(string wktPolygon);

      //  [DllImport("CGALWrapper", EntryPoint = "getPolygonSpine", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Ansi)]
     //   public static extern IntPtr getPolygonSpine(string wktPolygon);
               
        static void Main(string[] args)
        {
            //Console.WriteLine("prepeare...");
            //System.Threading.Thread.Sleep(6000);
            //Console.WriteLine("start");
           // string wktPol = "POLYGON((31.773834228515604 29.88470894463461,31.8067932128906 29.938275329718977,31.849365234375 29.998949050206107,31.878204345703097 30.069093964438906,31.876831054687504 30.111869849235305,31.856231689453104 30.221101852485987,31.8095397949219 30.299389313522596,31.747741699218704 30.374059992071196,31.6886901855469 30.4297295750316,31.6282653808594 30.466430433698022,31.5719604492188 30.4936511705059,31.5032958984375 30.517315187761895,31.397552490234403 30.546887109496012,31.294555664062496 30.564625940651,31.199798583984396 30.575267682886135,31.1009216308594 30.578814670835,31.013031005859403 30.571720565199897,30.8990478515625 30.5480697991036,30.793304443359396 30.5149490451777,30.698547363281204 30.460511875130678,30.6312561035156 30.40485985382928,30.5776977539063 30.351546261928988,30.5364990234375 30.285159872425993,30.507659912109403 30.21754184909568,30.4843139648437 30.130875412002297,30.4719543457031 30.053642570466096,30.4664611816406 29.97872859346991,30.4664611816406 29.906138955802703,30.47607421875 29.84064389983442,30.491180419921896 29.777489821468805,30.52001953125 29.68805274985681,30.5543518066406 29.639126796352002,30.5955505371094 29.60808825740679,30.654602050781296 29.57823449473922,30.7081604003906 29.559123451577975,30.754852294921896 29.551955878092983,30.849609374999996 29.551955878092983,30.9182739257812 29.551955878092983,30.948486328125004 29.553150508982114,30.9951782226562 29.559123451577975,31.0830688476563 29.585400203408398,31.17919921875 29.6116701151974,31.242370605468796 29.633158589140606,31.300048828125 29.6594160549124,31.371459960937504 29.6761217847243,31.4181518554687 29.661802757613785,31.453857421875004 29.628383768734807,31.4703369140625 29.587788659910004,31.4620971679687 29.532839863453432,31.431884765625004 29.46829664171321,31.387939453125 29.396533739128387,31.3385009765625 29.319930789777587,31.2574768066406 29.20851455640822,31.2245178222656 29.161755515328792,31.2052917480469 29.129371390826577,31.1929321289063 29.099376992628493,31.186065673828104 29.069373852431582,31.186065673828104 29.036960648558306,31.191558837890597 29.014145252384992,31.203918457031296 28.990123601014204,31.2368774414062 28.967297862201818,31.3742065429687 28.933650754875572,31.5472412109375 28.91441893013547,31.695556640625004 28.907206076336706,31.9290161132812 28.933650754875572,32.1047973632813 28.948072282131605,32.1981811523437 28.97210369939529,32.2970581054688 29.0009340350302,32.3904418945312 29.027354780418406,32.464599609375 29.058570583013307,32.5332641601562 29.072974690644884,32.6486206054688 29.060971407383875,32.6486206054688 29.147363831226585,32.530517578125 29.15455992534757,32.4371337890625 29.128171782816196,32.3382568359375 29.0873767852717,32.2283935546875 29.05616970274339,32.0773315429687 29.020149792758517,31.97021484375 29.010542360621997,31.835632324218697 28.996129537247086,31.7230224609375 28.984117315930803,31.6104125976563 28.976909313412392,31.451110839843697 28.986519871823404,31.3522338867187 28.998531814051802,31.2918090820313 29.00814036297818,31.256103515624996 29.022551511168402,31.234130859374996 29.051367774517274,31.234130859374996 29.08497657598592,31.2478637695313 29.1257725248081,31.2698364257813 29.164153933278,31.311035156250004 29.22169914928061,31.3494873046875 29.267232865200896,31.385192871093704 29.317536019588104,31.4208984375 29.372601506681406,31.451110839843697 29.425244985472034,31.4840698242187 29.48742484748479,31.5032958984375 29.54717721331582,31.506042480468704 29.60211821164731,31.4840698242187 29.64748169221768,31.453857421875004 29.680894340704313,31.409912109375 29.699982298744402,31.371459960937504 29.707139348134106,31.316528320312496 29.697596502283204,31.2066650390625 29.649868677972293,31.080322265625 29.61644572762249,30.953979492187496 29.57823449473922,30.728759765624996 29.57823449473922,30.624389648437504 29.61644572762259,30.5584716796875 29.668962525992498,30.4925537109375 29.864465259257997,30.4925537109375 29.997759725578902,30.509033203124996 30.116621582819405,30.541992187500004 30.244831915307202,30.596923828125 30.339694848974204,30.6793212890625 30.424992973925598,30.7781982421875 30.48655084258847,30.8990478515625 30.52914503668042,31.058349609375 30.562260950499393,31.2396240234375 30.55753079725919,31.431884765625004 30.524413269923983,31.585693359375 30.472348632640802,31.6900634765625 30.406044269969513,31.7724609375 30.315987718557892,31.8438720703125 30.206861065952594,31.860351562499996 30.0833546487562,31.827392578125 30.002516938570693,31.755981445312504 29.907329376851607,31.773834228515604 29.88470894463461))";
            string wktPol = "POLYGON((26.927490234374996 25.51270000762051,27.410888671874996 25.334096684794446,27.872314453124996 25.74052909277323,28.465576171874996 26.303264239389534,29.245605468749996 26.431228064506428,30.498046874999996 26.480407161007264,31.058349609375 26.31311263768268,31.816406249999996 25.87899440019619,32.20092773437499 25.373809171543982,32.34375 24.916331404599077,32.38769531249999 24.357105493969726,32.51953125 23.956136333969283,32.79418945312499 23.674712836608762,33.38745117187499 23.543845136505837,34.310302734375 23.624394569716912,35.10131835937499 23.795397597978734,35.70556640624999 24.266997288418167,35.947265625 24.87646991083153,36.07910156249999 25.38373525470685,35.78247070312499 25.84933689170761,35.343017578125 25.51270000762051,35.17822265625 24.976099493695415,34.81567382812499 24.407137917727653,34.27734374999999 24.206889622398023,33.40942382812499 24.16680208530323,33.01391601562499 24.3771208396104,32.860107421875 24.85653433931067,32.750244140625 25.492868271257123,32.49755859375 25.93828707492375,32.05810546874999 26.322960198925372,31.398925781249993 26.549222577692035,30.684814453124996 26.735799020431685,30.596923828124993 26.912273826625594,30.56396484374999 27.225325836903366,30.234374999999996 27.225325836903366,30.179443359374996 27.000408003521756,30.091552734375 26.85347943842001,29.652099609374996 26.75542089735913,29.047851562499996 26.75542089735913,28.509521484374993 26.67691308310546,28.157958984374996 26.480407161007264,27.839355468749996 26.254009699865733,27.564697265624993 25.96792222903406,27.344970703124996 25.74052909277323,27.125244140624996 25.77021384896024,26.817626953124996 26.01729756385174,26.510009765624993 26.204734267107597,26.422119140624996 26.0567828857788,26.323242187499996 25.78010711842225,26.927490234374996 25.51270000762051))";

            IntPtr pstr = getPolygonSpine(wktPol);
            string someshit = Marshal.PtrToStringAnsi(pstr);
            Console.WriteLine(someshit);

            Console.ReadLine();              
        }
    
    }
}
